<?xml version="1.0" encoding="UTF-8"?>
<project name="MSC" basedir="." default="menu">

    <!-- Default property file, override with -DpropertyFile=filename -->
    <property name="propertyFile" value="config/build.properties" />
    <if>
        <isset property="propertyFile" />
        <then>
            <available file="${propertyFile}" property="propertyFileExists"/>
            <if>
                <isset property="propertyFileExists"/>
                <then>
                    <property file="${propertyFile}" override="yes"/>
                </then>
            </if>
        </then>
    </if>

    <!-- Import custom tasks -->
    <taskdef classname="phing.tasks.BootstrapTask" name="bootstrap"/>

    <!-- ==========================  -->
    <!-- Target: Main target         -->
    <!-- ==========================  -->
    <target name="menu">
         <input propertyname="buildchoice" validargs="prepare">
             Prepare - prepare
         </input>
         <phingcall target="${buildchoice}"></phingcall>
    </target>
 
    <!-- ********************************************************************** -->
    <!-- *******************************TARGETS******************************** -->
    <!-- ********************************************************************** -->
    
    
    <target name="prepare">
        <echo msg="Creating config file ..." />
        <copy file="../../project/config/default.xml" 
              tofile="../../project/config/config.xml" 
              overwrite="true">
            <filterchain>
                <expandproperties />
            </filterchain>
        </copy>
        <copy file="resources/${mode}.htaccess" 
              tofile="../../public/.htaccess" 
              overwrite="true">
        </copy>
    </target>

</project>